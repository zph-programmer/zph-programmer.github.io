---
layout: post
title:  "缺陷分析工具和单元测试方案"
date:   2021-04-03 22:29:36 +0800
categories: jekyll
typora-root-url: ..
---



## 缺陷分析工具和单元测试方案

[TOC]

## 1、缺陷分析工具

| 工具名称   | 启用的规则数 | 发现的问题数 |
| ---------- | ------------ | ------------ |
| FindBugs   | 358          | 1            |
| Checkstyle | 35           | 179          |
| PMD        | 83           | 29           |

## 2、单元测试方案

原程序运行时，人工进行功能测试，需要在页面进行多次点击，观察程序运行结果，且依赖对数据库数据。不仅回归工作量大，而且容易受到历史数据，脏数据影响。

  ```mermaid
  graph LR;
  	页面点击-->|输入参数|pg([待测试程序])-->|输出结果|观察比较;
  	db[(数据库)]-->|获取数据|pg([待测试程序]);
  	
  	
  ```

使用JUnit+mockito+h2方案编写单元测试。所有输入参数都由代码确定，输出结果都通过json文件进行比较，数据库数据都由xml格式文件准备，不再受数据库影响。测试类一次编写，持续有效。



  ```mermaid
  graph LR;
  	编写测试类--->|构造输入参数|pg([待测试程序])-->|输出结果|比较Json;
  	准备xml格式数据-->|初始化|h2[(内存数据库)]-->|获取数据|pg([待测试程序]);
  ```













